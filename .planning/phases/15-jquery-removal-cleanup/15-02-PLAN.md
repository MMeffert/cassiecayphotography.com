---
phase: 15-jquery-removal-cleanup
plan: 02
type: execute
wave: 2
depends_on: ["15-01"]
files_modified:
  - index.html
  - vite.config.js
  - style/js/jquery.min.js
autonomous: false

must_haves:
  truths:
    - "Page loads with no console errors"
    - "All interactive features work without jQuery"
    - "jQuery file no longer exists in project"
    - "Build output excludes jQuery"
  artifacts:
    - path: "index.html"
      provides: "HTML without jQuery script tag"
      contains: "bootstrap.bundle.min.js"
    - path: "vite.config.js"
      provides: "Vite config without jQuery references"
  key_links:
    - from: "index.html"
      to: "style/js/bootstrap.bundle.min.js"
      via: "first vendor script (jQuery removed)"
      pattern: "<script src=\"style/js/bootstrap"
---

<objective>
Remove jQuery from the project entirely - script tags, Vite config, and file deletion.

Purpose: Complete the jQuery elimination, reducing JS bundle by ~95KB and satisfying JQ-01, JQ-03, JQ-04.
Output: jQuery-free project with verified functionality.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-jquery-removal-cleanup/15-RESEARCH.md
@.planning/phases/15-jquery-removal-cleanup/15-01-SUMMARY.md
@index.html
@vite.config.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove jQuery from index.html and vite.config.js</name>
  <files>index.html, vite.config.js</files>
  <action>
1. **Edit index.html** (line 1445):
   - Delete the jQuery script tag: `<script src="style/js/jquery.min.js"></script>`
   - This is the first script tag before `bootstrap.bundle.min.js`
   - After deletion, `bootstrap.bundle.min.js` becomes the first vendor script

2. **Edit vite.config.js**:
   - Remove from `external` array (line 21):
     ```javascript
     /^style\/js\/jquery\.min\.js$/,
     ```
   - Remove from `viteStaticCopy` targets (lines 40-43):
     ```javascript
     {
       src: 'style/js/jquery.min.js',
       dest: 'style/js'
     },
     ```

3. **Delete jQuery file**:
   ```bash
   rm style/js/jquery.min.js
   ```
  </action>
  <verify>
```bash
# Verify jQuery script tag removed from HTML
grep -n 'jquery' index.html

# Verify jQuery removed from Vite config
grep -n 'jquery' vite.config.js

# Verify jQuery file deleted
ls -la style/js/jquery.min.js 2>&1
```
All three commands should return no matches or "No such file".
  </verify>
  <done>
jQuery removed from index.html, vite.config.js, and file system.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build and verify no jQuery in output</name>
  <files>dist/</files>
  <action>
1. Run the production build:
   ```bash
   npm run build
   ```

2. Verify jQuery is not in the build output:
   ```bash
   # Check dist directory for jQuery
   find dist -name "*jquery*" -type f

   # Check dist/index.html for jQuery reference
   grep -n 'jquery' dist/index.html

   # Check all JS files for jQuery patterns
   grep -r '\$(' dist/style/js/
   grep -r 'jQuery' dist/style/js/
   ```

3. Measure the JS bundle size reduction:
   ```bash
   # Total JS in dist
   find dist/style/js -name "*.js" -exec wc -c {} + | tail -1
   ```
  </action>
  <verify>
```bash
npm run build && find dist -name "*jquery*" -type f && grep -c 'jquery' dist/index.html
```
Build succeeds. No jQuery files found. Zero jQuery references in dist/index.html.
  </verify>
  <done>
Build completes without jQuery. JQ-01 (jQuery removal) and JQ-03 (Vite config update) satisfied.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete jQuery removal from Cassie Cay Photography website:
- Converted all jQuery patterns in custom-scripts.js to vanilla JS (Plan 01)
- Removed jQuery script tag from index.html
- Removed jQuery from Vite config (external array and copy targets)
- Deleted jquery.min.js file (~95KB savings)
  </what-built>
  <how-to-verify>
1. Start the dev server: `npm run dev`

2. Open http://localhost:3000 in browser

3. **Check browser console** (F12 > Console):
   - Should show NO errors (especially no "$ is not defined")

4. **Test all interactive features:**
   - [ ] Hero slider auto-advances every 6 seconds
   - [ ] Portfolio grid displays correctly
   - [ ] Portfolio filter buttons work (Wedding, Portrait, etc.)
   - [ ] Clicking portfolio image opens GLightbox
   - [ ] Scroll down - sticky header appears around 350px
   - [ ] Scroll down further - scroll-to-top button appears
   - [ ] Click scroll-to-top - smooth scroll to top
   - [ ] Contact form submits (test with valid data)
   - [ ] Mobile menu works (use DevTools mobile view or resize)

5. **Verify quote slider** (if present on page):
   - Swiper navigation arrows work
   - Pagination dots are clickable

6. **Test mobile detection**:
   - Open DevTools, toggle device toolbar (mobile view)
   - Refresh page
   - Elements with `.image-wrapper` should have `.mobile` class added
  </how-to-verify>
  <resume-signal>Type "approved" if all features work, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
1. `grep -r 'jquery' index.html vite.config.js` returns no matches
2. `ls style/js/jquery.min.js` returns "No such file"
3. `npm run build` completes without errors
4. `grep -r '\$(' dist/style/js/` returns no matches
5. All interactive features work in browser
</verification>

<success_criteria>
- JQ-01: jQuery 3.x removed from vendor scripts (script tag deleted, file deleted)
- JQ-02: Already satisfied (no separate Popper v1 existed)
- JQ-03: Vite config updated (external array and copy targets cleaned)
- JQ-04: No jQuery references in any production scripts
- Page loads with no console errors
- All interactive features work (portfolio, lightbox, contact form, navigation)
- Bundle size reduced by ~95KB
</success_criteria>

<output>
After completion, create `.planning/phases/15-jquery-removal-cleanup/15-02-SUMMARY.md`
</output>
