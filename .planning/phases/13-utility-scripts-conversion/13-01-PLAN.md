---
phase: 13-utility-scripts-conversion
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - style/js/custom-scripts.js
autonomous: true

must_haves:
  truths:
    - "Scroll-to-top button appears when page is scrolled past 300px"
    - "Clicking the button smoothly scrolls to top of page"
    - "Button respects prefers-reduced-motion accessibility setting"
    - "Button disappears when near top of page"
  artifacts:
    - path: "style/js/custom-scripts.js"
      provides: "Scroll-to-top button implementation"
      contains: "scrollUp"
  key_links:
    - from: "style/js/custom-scripts.js"
      to: "#scrollUp CSS"
      via: "element creation with id='scrollUp'"
      pattern: "scrollUpBtn\\.id.*=.*scrollUp"
    - from: "scroll-to-top button"
      to: "window.scrollTo"
      via: "click event handler"
      pattern: "scrollTo.*top.*0.*behavior"
---

<objective>
Implement vanilla JS scroll-to-top button to replace the removed scrollUp jQuery plugin

Purpose: Complete UTIL-01 requirement. The scrollUp jQuery plugin was removed in Phase 12, but no replacement was added. The scroll-to-top functionality is currently missing from the site. Existing CSS for #scrollUp in style.css will be reused.

Output: Working scroll-to-top button that appears when scrolling down and smoothly returns user to top when clicked
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-utility-scripts-conversion/13-RESEARCH.md

# Existing files to reference
@style/js/custom-scripts.js
@style/style.css (lines 4835-4859 - existing #scrollUp CSS)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add vanilla JS scroll-to-top button to custom-scripts.js</name>
  <files>style/js/custom-scripts.js</files>
  <action>
Add a new IIFE section to custom-scripts.js (before the closing of $(document).ready) that implements a scroll-to-top button:

1. Create button element with id="scrollUp" containing:
   - Anchor with classes: btn btn-circle btn-dark
   - Font Awesome icon: fa fa-arrow-up

2. Set initial hidden state via inline styles:
   - opacity: 0
   - visibility: hidden
   - position: fixed
   - transition: opacity 300ms ease, visibility 300ms ease
   - zIndex: 9999

3. Create sentinel element for IntersectionObserver:
   - position: absolute at top: 300px
   - height: 1px, width: 100%
   - pointer-events: none
   - Insert as first child of body

4. Use IntersectionObserver to show/hide button:
   - When sentinel NOT intersecting (scrolled past 300px): show button (opacity: 1, visibility: visible)
   - When sentinel IS intersecting (near top): hide button (opacity: 0, visibility: hidden)

5. Add click handler that:
   - Prevents default
   - Checks window.matchMedia('(prefers-reduced-motion: reduce)').matches
   - Calls window.scrollTo({ top: 0, behavior: prefersReducedMotion ? 'instant' : 'smooth' })

6. Append button to document.body

Place this code in a new section with header comment:
/*-----------------------------------------------------------------------------------*/
/*  SCROLL TO TOP (Vanilla JS - replaces scrollUp jQuery plugin)
/*-----------------------------------------------------------------------------------*/

The existing CSS in style.css (lines 4837-4859) handles positioning (bottom: 15px, right: 15px) and button styling. Do NOT duplicate positioning in JS - only set opacity/visibility/transition for show/hide behavior.
  </action>
  <verify>
1. npm run build completes without errors
2. Open dist/index.html in browser, scroll down past hero section
3. Scroll-to-top button appears in bottom-right corner
4. Click button - page scrolls smoothly to top
5. Button disappears when near top of page
6. Test with DevTools: set prefers-reduced-motion: reduce in Rendering tab, click button - instant scroll (no animation)
  </verify>
  <done>
- Scroll-to-top button appears after scrolling ~300px
- Clicking button returns user to top with smooth scroll
- Button uses existing CSS styling (btn-circle btn-dark)
- Respects prefers-reduced-motion accessibility preference
- No console errors
  </done>
</task>

</tasks>

<verification>
Phase verification:
1. `npm run build` completes successfully
2. Scroll-to-top button visible when scrolled down
3. Button click smoothly scrolls to top
4. Button hidden when at top of page
5. Accessibility: prefers-reduced-motion respected
6. No jQuery used in scroll-to-top implementation (verify with grep)
</verification>

<success_criteria>
1. UTIL-01 COMPLETE: Scroll-to-top button works without jQuery
2. Button appears/disappears based on scroll position (IntersectionObserver)
3. Smooth scroll respects prefers-reduced-motion preference
4. Existing #scrollUp CSS reused (no new CSS needed)
5. Build passes, no console errors
</success_criteria>

<output>
After completion, create `.planning/phases/13-utility-scripts-conversion/13-01-SUMMARY.md`
</output>
