---
phase: 08-library-modernization
plan: 02
type: execute
wave: 2
depends_on: [08-01]
files_modified:
  - package.json
  - index.html
  - style/js/custom-scripts.js
  - style/css/hero-slider.css
  - vite.config.js
autonomous: true

must_haves:
  truths:
    - "Hero slider auto-advances through 2 images"
    - "Fade transition between slides is smooth"
    - "Text overlay displays correctly (tagline and title)"
    - "Slider does NOT pause on hover"
    - "Slider works on mobile (passive viewing)"
  artifacts:
    - path: "style/css/hero-slider.css"
      provides: "Embla slider styling with fade effect"
      min_lines: 30
    - path: "style/js/custom-scripts.js"
      provides: "Embla Carousel initialization"
      contains: "EmblaCarousel"
  key_links:
    - from: "index.html"
      to: "style/css/hero-slider.css"
      via: "link tag"
      pattern: "hero-slider"
    - from: "style/js/custom-scripts.js"
      to: ".hero-slider"
      via: "Embla selector"
      pattern: "hero-slider.*embla"
---

<objective>
Replace Revolution Slider with Embla Carousel for the hero slider.

Purpose: Revolution Slider loads ~420KB of JavaScript for a simple 2-image fade slider with static text overlay. Embla Carousel (~7KB) provides equivalent functionality at 98% less size. This also fixes BUG-03 (pause-on-hover behavior) by using Embla's `stopOnMouseEnter: false` option.

Output: Working fullscreen hero slider using Embla Carousel with auto-advance, fade transitions, static text overlay, and no pause-on-hover.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/roadmap/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-library-modernization/08-RESEARCH.md
@.planning/phases/08-library-modernization/08-01-SUMMARY.md

@index.html (lines 88-95 - Revolution CSS links, lines 143-184 - slider HTML)
@style/js/custom-scripts.js
@vite.config.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Embla Carousel and create slider CSS</name>
  <files>package.json, style/css/hero-slider.css, index.html</files>
  <action>
1. Install Embla Carousel and autoplay plugin:
   ```bash
   npm install embla-carousel embla-carousel-autoplay
   ```

2. Create style/css/hero-slider.css with fullscreen fade slider styles:

   ```css
   /* Hero Slider - Embla Carousel with Fade Transitions */
   .hero-slider {
     position: relative;
     height: 100vh;
     width: 100%;
     overflow: hidden;
   }

   .hero-slider .embla__viewport {
     overflow: hidden;
     height: 100%;
     width: 100%;
   }

   .hero-slider .embla__container {
     display: flex;
     height: 100%;
     /* For fade effect, slides overlap */
   }

   .hero-slider .embla__slide {
     position: absolute;
     top: 0;
     left: 0;
     width: 100%;
     height: 100%;
     flex: 0 0 100%;
     min-width: 0;
     opacity: 0;
     transition: opacity 0.8s ease-in-out;
   }

   .hero-slider .embla__slide.is-selected {
     opacity: 1;
     z-index: 1;
   }

   .hero-slider .embla__slide img {
     width: 100%;
     height: 100%;
     object-fit: cover;
   }

   /* Text Overlay - Static positioning */
   .hero-overlay {
     position: absolute;
     top: 20px;
     right: 20px;
     text-align: right;
     color: white;
     z-index: 10;
     pointer-events: none;
   }

   .hero-tagline {
     display: block;
     text-transform: uppercase;
     letter-spacing: 3px;
     font-size: 16px;
     font-weight: 500;
     margin-bottom: 10px;
   }

   .hero-title {
     display: block;
     font-family: liebegerda, sans-serif;
     font-style: italic;
     font-size: 50px;
     font-weight: 700;
     line-height: 1;
   }

   /* Responsive text sizing */
   @media (max-width: 1024px) {
     .hero-title {
       font-size: 45px;
     }
   }

   @media (max-width: 778px) {
     .hero-title {
       font-size: 40px;
     }
   }

   @media (max-width: 480px) {
     .hero-title {
       font-size: 30px;
     }
     .hero-overlay {
       top: 10px;
       right: 10px;
     }
   }
   ```

3. Add hero-slider CSS link to index.html (after plugins.css, before revolution CSS):
   ```html
   <link rel="stylesheet" type="text/css" href="style/css/hero-slider.css">
   ```

4. Remove Revolution Slider CSS links from index.html (lines 90-94):
   - Remove: style/revolution/css/settings.css
   - Remove: style/revolution/css/layers.css
   - Remove: style/revolution/css/navigation.css
   - Remove: style/revolution/revolution-addons/filmstrip/css/revolution.addon.filmstrip.css
   - Remove: style/revolution/revolution-addons/typewriter/css/typewriter.css
  </action>
  <verify>
- `npm ls embla-carousel embla-carousel-autoplay` shows packages installed
- `style/css/hero-slider.css` exists with fullscreen fade styles
- `grep hero-slider index.html` shows CSS link
- `grep "revolution/css" index.html` returns nothing (CSS links removed)
  </verify>
  <done>Embla packages installed, hero slider CSS created, Revolution CSS links removed</done>
</task>

<task type="auto">
  <name>Task 2: Replace Revolution Slider HTML with Embla structure</name>
  <files>index.html</files>
  <action>
1. Replace the Revolution Slider HTML section (lines 143-184) with Embla structure:

   BEFORE (Revolution Slider):
   ```html
   <section id="home" class="pt-0 mt-0">
     <div class="rev_slider_wrapper fullscreen-container">
       <div id="slider" class="rev_slider fullscreenbanner bg-dark" data-version="5.4.8">
         <ul>
           <li data-transition="fade" data-thumb="..."><img src="..." alt="..." /></li>
           <li data-transition="fade" data-thumb="..."><img src="..." alt="..." /></li>
         </ul>
         <div class="tp-static-layers">
           ... text overlay divs ...
         </div>
       </div>
     </div>
   </section>
   ```

   AFTER (Embla Carousel):
   ```html
   <section id="home" class="pt-0 mt-0">
     <div class="hero-slider embla">
       <div class="embla__viewport">
         <div class="embla__container">
           <div class="embla__slide">
             <img src="images-optimized/jpeg/full/cassiecay-slider7.jpg" alt="Cassie Cay Photography">
           </div>
           <div class="embla__slide">
             <img src="images-optimized/jpeg/full/cassiecay-slider2.jpg" alt="Cassie Cay Photography">
           </div>
         </div>
       </div>
       <div class="hero-overlay">
         <span class="hero-tagline">capturing beautiful moments</span>
         <span class="hero-title">Cassie Cay Photography</span>
       </div>
     </div>
   </section>
   ```

Note:
- Image sources preserved from original slider
- Text overlay content preserved (tagline + title)
- Static text overlay instead of animated (per CONTEXT.md decision)
- Alt text kept for accessibility
  </action>
  <verify>
- `grep "hero-slider" index.html` shows new structure
- `grep "rev_slider" index.html` returns nothing
- `grep "tp-static-layers" index.html` returns nothing
- `grep "embla__slide" index.html` shows 2 slides
- `grep "hero-overlay" index.html` shows text overlay
  </verify>
  <done>Revolution Slider HTML replaced with Embla structure, text overlay preserved as static</done>
</task>

<task type="auto">
  <name>Task 3: Add Embla initialization and remove Revolution scripts</name>
  <files>style/js/custom-scripts.js, index.html, vite.config.js</files>
  <action>
1. Copy Embla JS files to style/js/:
   ```bash
   cp node_modules/embla-carousel/embla-carousel.umd.js style/js/
   cp node_modules/embla-carousel-autoplay/embla-carousel-autoplay.umd.js style/js/
   ```

2. Add Embla script tags to index.html BEFORE custom-scripts.js:
   ```html
   <script src="style/js/embla-carousel.umd.js"></script>
   <script src="style/js/embla-carousel-autoplay.umd.js"></script>
   ```

3. Remove ALL Revolution Slider script tags from index.html (the block after bootstrap.min.js):
   - Remove: style/revolution/js/jquery.themepunch.tools.min.js
   - Remove: style/revolution/js/jquery.themepunch.revolution.min.js
   - Remove: style/revolution/revolution-addons/filmstrip/js/revolution.addon.filmstrip.min.js
   - Remove: style/revolution/revolution-addons/typewriter/js/revolution.addon.typewriter.min.js
   - Remove: style/revolution/js/extensions/revolution.extension.actions.min.js
   - Remove: style/revolution/js/extensions/revolution.extension.carousel.min.js
   - Remove: style/revolution/js/extensions/revolution.extension.kenburn.min.js
   - Remove: style/revolution/js/extensions/revolution.extension.layeranimation.min.js
   - Remove: style/revolution/js/extensions/revolution.extension.migration.min.js
   - Remove: style/revolution/js/extensions/revolution.extension.navigation.min.js
   - Remove: style/revolution/js/extensions/revolution.extension.parallax.min.js
   - Remove: style/revolution/js/extensions/revolution.extension.slideanims.min.js
   - Remove: style/revolution/js/extensions/revolution.extension.video.min.js

4. Add Embla initialization to custom-scripts.js (at the beginning, after 'use strict'):

   ```javascript
   /*-----------------------------------------------------------------------------------*/
   /*	HERO SLIDER (Embla Carousel)
   /*-----------------------------------------------------------------------------------*/
   var heroSlider = document.querySelector('.hero-slider');
   if (heroSlider) {
       var viewportNode = heroSlider.querySelector('.embla__viewport');
       var slides = heroSlider.querySelectorAll('.embla__slide');

       // Initialize with autoplay
       var emblaApi = EmblaCarousel(
           viewportNode,
           {
               loop: true,
               draggable: false  // No manual navigation per requirements
           },
           [
               EmblaCarouselAutoplay({
                   delay: 6000,              // 6 seconds between slides
                   stopOnInteraction: false, // Don't stop on any interaction
                   stopOnMouseEnter: false,  // DON'T pause on hover (fixes BUG-03)
                   playOnInit: true          // Start automatically
               })
           ]
       );

       // Handle fade effect via CSS class
       function setSelectedClass() {
           var selected = emblaApi.selectedScrollSnap();
           slides.forEach(function(slide, index) {
               if (index === selected) {
                   slide.classList.add('is-selected');
               } else {
                   slide.classList.remove('is-selected');
               }
           });
       }

       emblaApi.on('select', setSelectedClass);
       setSelectedClass(); // Set initial state
   }
   ```

5. Update vite.config.js:

   a. Remove Revolution Slider from external array and static copy:
   - Remove `/^style\/revolution\//` from external
   - Remove revolution CSS patterns from external
   - Remove `{ src: 'style/revolution', dest: 'style' }` from viteStaticCopy targets

   b. Add Embla files to static copy:
   ```javascript
   {
     src: 'style/js/embla-carousel.umd.js',
     dest: 'style/js'
   },
   {
     src: 'style/js/embla-carousel-autoplay.umd.js',
     dest: 'style/js'
   },
   {
     src: 'style/css/hero-slider.css',
     dest: 'style/css'
   },
   ```

   c. Remove the preserveRevolutionSliderCSS plugin (no longer needed)
  </action>
  <verify>
- `ls style/js/embla*.js` shows 2 Embla files
- `grep "embla-carousel" index.html` shows 2 script tags
- `grep "revolution" index.html` returns nothing (all Revolution references removed)
- `grep "EmblaCarousel" style/js/custom-scripts.js` shows initialization
- `grep "stopOnMouseEnter: false" style/js/custom-scripts.js` confirms BUG-03 fix
- `npm run build` succeeds
  </verify>
  <done>
- Embla JS files copied and referenced
- Revolution Slider scripts removed from HTML
- Embla initialization added to custom-scripts.js
- vite.config.js updated (Revolution removed, Embla added)
- BUG-03 fixed with stopOnMouseEnter: false
  </done>
</task>

</tasks>

<verification>
1. Hero slider displays fullscreen with first image
2. Slider auto-advances to second image after ~6 seconds
3. Fade transition is smooth (0.8s)
4. Text overlay displays correctly (top-right, correct fonts)
5. Hovering over slider does NOT pause it (BUG-03 fixed)
6. Works on mobile viewport (passive viewing)
7. No Revolution Slider files loaded (check Network tab)
8. No console errors
9. Production build works (`npm run build && npm run preview`)
</verification>

<success_criteria>
- Revolution Slider completely removed from codebase
- Embla Carousel providing equivalent functionality
- ~420KB JavaScript savings (Revolution Slider removed)
- BUG-03 fixed (slider no longer pauses on hover)
- Text overlay matches original design intent
- Smooth fade transitions between slides
- All tests pass: `npm run build`
</success_criteria>

<output>
After completion, create `.planning/phases/08-library-modernization/08-02-SUMMARY.md`
</output>
