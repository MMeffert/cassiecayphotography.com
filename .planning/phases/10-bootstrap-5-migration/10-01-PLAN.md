---
phase: 10-bootstrap-5-migration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - index.html
  - style/css/bootstrap.min.css
  - style/js/bootstrap.bundle.min.js
  - style/js/popper.min.js
autonomous: false

must_haves:
  truths:
    - "Navbar hamburger menu opens and closes on mobile"
    - "Scrollspy highlights current section in navigation"
    - "Page layout unchanged from pre-migration appearance"
    - "Console shows no Bootstrap-related JavaScript errors"
  artifacts:
    - path: "index.html"
      provides: "Bootstrap 5 data attributes and CSS classes"
      contains: "data-bs-toggle"
    - path: "style/css/bootstrap.min.css"
      provides: "Bootstrap 5.3.3 CSS framework"
      min_lines: 1
    - path: "style/js/bootstrap.bundle.min.js"
      provides: "Bootstrap 5.3.3 JS with Popper v2"
      min_lines: 1
  key_links:
    - from: "index.html"
      to: "style/js/bootstrap.bundle.min.js"
      via: "script tag"
      pattern: 'src="style/js/bootstrap.bundle.min.js"'
    - from: "index.html hamburger button"
      to: "navbar-collapse"
      via: "data-bs-toggle and data-bs-target"
      pattern: 'data-bs-toggle="collapse"'
---

<objective>
Migrate site from Bootstrap 4.4.1 to Bootstrap 5.3.x

Purpose: Foundation for jQuery removal - Bootstrap 5 no longer requires jQuery
Output: Working site with Bootstrap 5, navbar collapse functional, no JS errors
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/10-bootstrap-5-migration/10-RESEARCH.md
@index.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update HTML attributes and classes for Bootstrap 5</name>
  <files>index.html</files>
  <action>
Update data attributes from Bootstrap 4 to Bootstrap 5 namespace:

1. Line 110 (body tag):
   - `data-spy="scroll"` -> `data-bs-spy="scroll"`
   - `data-target=".navbar"` -> `data-bs-target=".navbar"`

2. Line 120 (hamburger button):
   - `data-toggle="collapse"` -> `data-bs-toggle="collapse"`
   - `data-target=".navbar-collapse"` -> `data-bs-target=".navbar-collapse"`

Update CSS utility classes:
3. Line 120: `ml-auto` -> `ms-auto` (navbar-hamburger div)
4. Line 124: `ml-auto` -> `ms-auto` (nav.navbar-nav ul)

DO NOT change:
- `data-filter` attributes (Cubeportfolio, not Bootstrap)
- `data-image-src` attributes (lazy loading, not Bootstrap)
- `data-sub-html` attributes (GLightbox, not Bootstrap)
- `pr-10` and `pl-10` classes (custom-defined in plugins.css, not Bootstrap)
  </action>
  <verify>
grep -E "data-toggle=|data-target=|data-spy=" index.html | wc -l
# Should return 0 (all converted to data-bs-*)

grep -E 'data-bs-toggle=|data-bs-target=|data-bs-spy=' index.html | wc -l
# Should return 4

grep -c "ml-auto" index.html
# Should return 0

grep -c "ms-auto" index.html
# Should return 2
  </verify>
  <done>All Bootstrap data-* attributes converted to data-bs-*, ml-auto converted to ms-auto</done>
</task>

<task type="auto">
  <name>Task 2: Replace Bootstrap files and update script references</name>
  <files>style/css/bootstrap.min.css, style/js/bootstrap.bundle.min.js, index.html</files>
  <action>
1. Download Bootstrap 5.3.3 CSS (replaces 4.4.1):
   curl -o style/css/bootstrap.min.css https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css

2. Download Bootstrap 5.3.3 JS bundle (includes Popper v2):
   curl -o style/js/bootstrap.bundle.min.js https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js

3. Update script tags in index.html (near end of file, around line 1340):

   BEFORE:
   <script src="style/js/popper.min.js"></script>
   <script src="style/js/bootstrap.min.js"></script>

   AFTER:
   <script src="style/js/bootstrap.bundle.min.js"></script>

   (Remove popper.min.js line, replace bootstrap.min.js with bootstrap.bundle.min.js)

4. Delete the old popper.min.js file:
   rm style/js/popper.min.js

Keep jquery.min.js - still needed for other plugins until Phase 15.
  </action>
  <verify>
# Bootstrap 5 CSS downloaded
head -1 style/css/bootstrap.min.css | grep -q "Bootstrap v5" && echo "CSS OK"

# Bootstrap 5 bundle downloaded
head -1 style/js/bootstrap.bundle.min.js | grep -q "Bootstrap v5" && echo "JS OK"

# Popper.min.js removed
ls style/js/popper.min.js 2>/dev/null && echo "FAIL: popper.min.js still exists" || echo "Popper removed OK"

# Script tags updated
grep -c "bootstrap.bundle.min.js" index.html
# Should return 1

grep -c "popper.min.js" index.html
# Should return 0

grep -c "bootstrap.min.js" index.html
# Should return 0 (now using bundle)
  </verify>
  <done>Bootstrap 5.3.3 CSS and JS bundle installed, old popper.min.js removed, script tags updated</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Bootstrap 5 migration - data attributes, CSS classes, and library files replaced</what-built>
  <how-to-verify>
1. Run local dev server:
   npm run dev

2. Open http://localhost:5173 in Chrome

3. Test mobile navbar (Critical - BS5-04):
   - Open DevTools (F12)
   - Toggle device toolbar (Ctrl+Shift+M)
   - Select mobile viewport (e.g., iPhone 14 Pro)
   - Click hamburger menu icon
   - Verify navbar slides open
   - Click hamburger again
   - Verify navbar closes

4. Test scrollspy (BS5-01, BS5-02):
   - On desktop viewport
   - Scroll down the page slowly
   - Watch nav links - current section should highlight

5. Check console (BS5-03):
   - Open DevTools Console tab
   - Scroll around, click nav links
   - Verify NO Bootstrap-related errors

6. Visual regression check (Success Criteria #3):
   - Compare page layout to previous version
   - Check navbar, forms, spacing look unchanged

Expected: All tests pass. If navbar doesn't toggle, data-bs-* attributes may be missing.
  </how-to-verify>
  <resume-signal>Type "approved" if all tests pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
After all tasks complete:
1. `npm run build` succeeds without errors
2. `npm run dev` serves site correctly
3. No Bootstrap-related console errors
4. Mobile navbar opens/closes
5. Desktop scrollspy highlights current section
</verification>

<success_criteria>
1. Navbar hamburger menu opens and closes on mobile devices (BS5-04)
2. All dropdown menus function correctly on desktop (BS5-05)
3. Page layout matches pre-migration appearance (no visual regressions)
4. Console shows no Bootstrap-related JavaScript errors (BS5-03)
5. All data-* attributes converted to data-bs-* (BS5-01)
6. All utility classes updated (ml-* to ms-*) (BS5-02)
</success_criteria>

<output>
After completion, create `.planning/phases/10-bootstrap-5-migration/10-01-SUMMARY.md`
</output>
