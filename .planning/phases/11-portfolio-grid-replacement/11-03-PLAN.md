---
phase: 11-portfolio-grid-replacement
plan: 03
type: execute
wave: 3
depends_on: ["11-02"]
files_modified:
  - style/js/custom-plugins.js
  - style/css/plugins.css
autonomous: false

must_haves:
  truths:
    - "Portfolio filtering works correctly with smooth animations"
    - "Masonry layout displays variable-height images without gaps"
    - "All responsive breakpoints display correct column count"
    - "GLightbox opens correct images after filtering"
    - "Cubeportfolio code removed from codebase"
  artifacts:
    - path: "style/js/custom-plugins.js"
      provides: "Plugin bundle without Cubeportfolio"
    - path: "style/css/plugins.css"
      provides: "Plugin CSS without Cubeportfolio styles"
  key_links:
    - from: "custom-plugins.js"
      to: "Muuri (external)"
      via: "Cubeportfolio removed, Muuri loaded separately"
---

<objective>
Verify portfolio functionality and remove Cubeportfolio code

Purpose: Human verification of portfolio grid replacement, then cleanup of Cubeportfolio from plugin bundles to reduce bundle size.

Output: Working portfolio with Muuri, Cubeportfolio removed from codebase (~80KB savings)
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-portfolio-grid-replacement/11-RESEARCH.md
@.planning/phases/11-portfolio-grid-replacement/11-02-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Portfolio grid with Muuri replacing Cubeportfolio - filtering, masonry layout, and GLightbox integration</what-built>
  <how-to-verify>
Start dev server if not running:
```bash
npm run dev
```

Open http://localhost:5173 and verify:

1. **Initial Display (PORT-03)**:
   - Portfolio section shows all 76 images in grid
   - Desktop: 4 columns
   - Grid fills width without large gaps

2. **Filter Functionality (PORT-01, PORT-02)**:
   - Click "Family" button -> only family photos shown (~28)
   - Click "Couples" button -> only couples photos shown (~10)
   - Click "All" button -> all 76 photos shown
   - Active button has visual indicator (underline/highlight)

3. **Animation Quality (PORT-05)**:
   - Filtering has smooth fade/scale animation
   - No jarring layout jumps
   - Items reposition smoothly

4. **Masonry Layout (PORT-06)**:
   - Variable-height images display without gaps
   - Items "pack" together like bricks
   - Layout looks similar to original Cubeportfolio

5. **Lightbox Integration (PORT-04)**:
   - Click any image -> GLightbox opens with full-size image
   - After filtering to "Newborn" and clicking image -> correct image opens
   - Navigate with arrows in lightbox
   - Close lightbox and filter again -> still works

6. **Responsive Breakpoints (PORT-03)**:
   - Open DevTools, resize to 1024px width -> 4 columns
   - Resize to 800px width -> 3 columns
   - Resize to 600px width -> 2 columns
   - Resize to 400px width -> 1 column

7. **No Console Errors**:
   - Open DevTools Console
   - Refresh page and filter several times
   - No JavaScript errors

Issues to report if found:
- Layout gaps between images
- Filter not working for specific category
- Lightbox showing wrong image
- Animations not smooth
- Breakpoints not matching expected columns
- Console errors
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe specific issues found</resume-signal>
</task>

<task type="auto">
  <name>Task 2: Remove Cubeportfolio from custom-plugins.js</name>
  <files>style/js/custom-plugins.js</files>
  <action>
Remove Cubeportfolio and imagesLoaded from custom-plugins.js:

1. Locate Cubeportfolio section (search for "Cube Portfolio" or "cubeportfolio"):
   - It starts around line 87 with copyright comment
   - Ends before the next plugin section

2. Locate imagesLoaded section (Cubeportfolio dependency):
   - Search for "imagesLoaded"
   - Remove this plugin as well (no longer needed)

3. Update the header comment to remove Cubeportfolio and imagesLoaded from the list:
   - Remove "- imagesLoaded (Cube Portfolio dependency)"
   - Remove "- Cube Portfolio (portfolio grid)"

4. The file should still contain:
   - SmartMenus (navbar)
   - Headhesive (sticky header)
   - jQuery Easing (smooth scroll)
   - Swiper (quote slider)
   - scrollUp (back to top)

Expected size reduction: ~80KB (Cubeportfolio ~60KB + imagesLoaded ~20KB)
  </action>
  <verify>
```bash
# Verify Cubeportfolio removed
grep -q "cubeportfolio" style/js/custom-plugins.js || echo "Cubeportfolio removed from plugins"
grep -q "imagesLoaded" style/js/custom-plugins.js || echo "imagesLoaded removed from plugins"

# Check file size reduced (original ~263KB, should be ~180KB)
wc -c style/js/custom-plugins.js

# Verify remaining plugins still present
grep -q "SmartMenus" style/js/custom-plugins.js && echo "SmartMenus present"
grep -q "Headhesive" style/js/custom-plugins.js && echo "Headhesive present"
grep -q "Swiper" style/js/custom-plugins.js && echo "Swiper present"
grep -q "scrollUp" style/js/custom-plugins.js && echo "scrollUp present"
```
  </verify>
  <done>Cubeportfolio (~60KB) and imagesLoaded (~20KB) removed from custom-plugins.js</done>
</task>

<task type="auto">
  <name>Task 3: Final build verification</name>
  <files>none (verification only)</files>
  <action>
Run final build and verify site still works:

1. Run build:
   ```bash
   npm run build
   ```

2. Verify bundle size reduction:
   ```bash
   ls -la style/js/custom-plugins.js
   # Should be ~180KB or less (down from ~263KB)
   ```

3. Verify Muuri is present:
   ```bash
   ls -la style/js/muuri.min.js
   # Should be ~24KB
   ```

4. Check that Cubeportfolio CSS styles in style.css are still fine
   (they're in the theme CSS, don't need to be removed - they're harmless unused CSS)
  </action>
  <verify>
```bash
npm run build && echo "Build successful"
```
  </verify>
  <done>Build passes, portfolio works with Muuri, Cubeportfolio code removed</done>
</task>

</tasks>

<verification>
1. Human verified portfolio functionality
2. Cubeportfolio removed from custom-plugins.js
3. imagesLoaded removed from custom-plugins.js
4. Build passes
5. Bundle size reduced by ~80KB
</verification>

<success_criteria>
- Portfolio filtering works for all 5 categories + All
- Masonry layout displays correctly (no gaps)
- GLightbox works after filtering
- Responsive breakpoints: 4/4/3/2/1 columns
- No console errors
- Cubeportfolio and imagesLoaded removed from plugins bundle
- custom-plugins.js reduced to ~180KB or less
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/11-portfolio-grid-replacement/11-03-SUMMARY.md`
</output>
