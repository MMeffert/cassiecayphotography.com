---
phase: 11-portfolio-grid-replacement
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - index.html
  - style/css/portfolio-grid.css
  - style/js/muuri.min.js
autonomous: true

must_haves:
  truths:
    - "Muuri library is available at runtime"
    - "Portfolio grid CSS provides responsive 4/3/2/1 column layout"
    - "Filter button styles match existing Cubeportfolio appearance"
  artifacts:
    - path: "style/js/muuri.min.js"
      provides: "Muuri layout and filtering library"
      min_lines: 1
    - path: "style/css/portfolio-grid.css"
      provides: "Portfolio grid and filter styles"
      min_lines: 50
  key_links:
    - from: "index.html"
      to: "style/js/muuri.min.js"
      via: "script tag before custom-scripts.js"
      pattern: "muuri\\.min\\.js"
    - from: "index.html"
      to: "style/css/portfolio-grid.css"
      via: "link tag in head"
      pattern: "portfolio-grid\\.css"
---

<objective>
Add Muuri library and create portfolio grid CSS styles

Purpose: Establish the foundation for replacing Cubeportfolio with Muuri by adding the library and creating responsive grid CSS that matches the current 4/3/2/1 column breakpoints.

Output: Muuri library loaded, portfolio-grid.css with responsive layout and filter button styles
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-portfolio-grid-replacement/11-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Download and add Muuri library</name>
  <files>style/js/muuri.min.js, index.html</files>
  <action>
Download Muuri 0.9.5 minified from CDN and save to style/js/muuri.min.js:
```bash
curl -o style/js/muuri.min.js https://cdn.jsdelivr.net/npm/muuri@0.9.5/dist/muuri.min.js
```

Add script tag to index.html BEFORE custom-scripts.js (around line 1297):
```html
<script src="style/js/muuri.min.js"></script>
```

Script loading order should be:
1. jquery.min.js
2. bootstrap.bundle.min.js
3. embla-carousel.umd.js
4. embla-carousel-autoplay.umd.js
5. glightbox.min.js
6. muuri.min.js (NEW)
7. custom-plugins.js
8. custom-scripts.js

Note: Muuri has no dependencies - it's vanilla JS with optional Web Animations API support.
  </action>
  <verify>
File exists and contains Muuri:
```bash
grep -q "Muuri" style/js/muuri.min.js && echo "Muuri library present"
grep -q "muuri.min.js" index.html && echo "Script tag added"
```
  </verify>
  <done>Muuri 0.9.5 library saved to style/js/muuri.min.js and script tag added to index.html before custom-scripts.js</done>
</task>

<task type="auto">
  <name>Task 2: Create portfolio grid CSS stylesheet</name>
  <files>style/css/portfolio-grid.css, index.html</files>
  <action>
Create style/css/portfolio-grid.css with the following styles:

1. **Portfolio Grid Container** (#portfolio-grid):
   - position: relative (required for Muuri absolute positioning)
   - No explicit grid display (Muuri handles positioning via absolute)

2. **Portfolio Items** (.portfolio-item):
   - position: absolute (Muuri requirement)
   - width: calc(25% - 0px) for 4 columns with 0 gap
   - display: block
   - z-index: 1

3. **Portfolio Item Content** (.portfolio-item-content):
   - position: relative
   - width: 100%

4. **Responsive Breakpoints** (match current Cubeportfolio config):
   - 1440px+: 4 columns (25%)
   - 1024-1439px: 4 columns (25%)
   - 768-1023px: 3 columns (33.333%)
   - 575-767px: 2 columns (50%)
   - 320-574px: 1 column (100%)

5. **Filter Buttons** (.portfolio-filter-container, .filter-btn):
   - Match existing .cbp-filter-container and .cbp-filter-item styles from style.css
   - Active state: .filter-btn.active (match .cbp-filter-item-active)
   - Inherit inverse-text styles for dark wrapper context

6. **Animation Classes** (for Muuri show/hide):
   - .portfolio-item--visible: opacity 1, transform scale(1)
   - .portfolio-item--hidden: opacity 0, transform scale(0.5)
   - .portfolio-item--positioning: transition for movement
   - transition: opacity 300ms, transform 300ms ease

7. **Image handling**:
   - .portfolio-item img: max-width 100%, display block
   - Preserve existing .overlay and .overlay2 classes (hover effects)

Add link tag to index.html head AFTER style.css (around line 93):
```html
<link rel="stylesheet" type="text/css" href="style/css/portfolio-grid.css">
```
  </action>
  <verify>
```bash
test -f style/css/portfolio-grid.css && echo "CSS file exists"
grep -q "#portfolio-grid" style/css/portfolio-grid.css && echo "Grid container styles present"
grep -q ".filter-btn" style/css/portfolio-grid.css && echo "Filter button styles present"
grep -q "@media" style/css/portfolio-grid.css && echo "Responsive breakpoints present"
grep -q "portfolio-grid.css" index.html && echo "CSS link added to HTML"
```
  </verify>
  <done>portfolio-grid.css created with responsive layout (4/3/2/1 columns), filter button styles matching existing design, and animation classes for Muuri transitions</done>
</task>

</tasks>

<verification>
1. Build completes without errors: `npm run build`
2. Muuri library file size ~24KB (minified)
3. CSS file contains all required breakpoints
4. No duplicate style imports in index.html
</verification>

<success_criteria>
- Muuri 0.9.5 library present at style/js/muuri.min.js
- Script tag added before custom-scripts.js
- portfolio-grid.css created with responsive breakpoints
- CSS link added to index.html head
- Build passes successfully
</success_criteria>

<output>
After completion, create `.planning/phases/11-portfolio-grid-replacement/11-01-SUMMARY.md`
</output>
